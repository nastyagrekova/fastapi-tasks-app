{% extends "base.html" %}
{% block content %}

<h1 class="mb-4">üìä –û–ø—Ç–∏–º–∞–ª–µ–Ω –≥—Ä–∞—Ñ–∏–∫</h1>

{% if ai_advice %}
<div class="alert alert-info mt-4">
  <strong>ü§ñ –ò–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–µ–Ω —Å—ä–≤–µ—Ç:</strong> {{ ai_advice }}
</div>
{% endif %}

<div class="mb-4">
  <h5>–ü—Ä–æ–≥—Ä–µ—Å –Ω–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ: {{ progress_percent }}%</h5>
  <div class="progress" style="height: 24px;">
    <div class="progress-bar bg-success" role="progressbar"
         style="width: {{ progress_percent }}%;" aria-valuenow="{{ progress_percent }}" aria-valuemin="0" aria-valuemax="100">
      {{ progress_percent }}%
    </div>
  </div>
</div>

<table class="table table-hover align-middle rounded-table">
  <thead class="custom-header">
    <tr>
      <th>–ò–º–µ</th>
      <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
      <th>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</th>
      <th>–ö—Ä–∞–µ–Ω —Å—Ä–æ–∫</th>
      <th>–°—Ç–∞—Ç—É—Å</th>
      <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
    </tr>
  </thead>
  <tbody>
    {% for task in tasks %}
    <tr>
      <td>{{ task.name }}</td>
      <td>{{ task.category }}</td>
      <td>{{ task.priority }}</td>
      <td>{{ task.due_date }}</td>
      <td>
        <span class="badge
          {% if task.status == '–ù–æ–≤–∞' %}bg-primary
          {% elif task.status == '–°—Ç–∞—Ä–∞' %}bg-secondary
          {% elif task.status == '–ó–∞–≤—ä—Ä—à–µ–Ω–∞' %}bg-success
          {% endif %}">
          {{ task.status }}
        </span>
      </td>
      <td>
        {% if task.status != '–ó–∞–≤—ä—Ä—à–µ–Ω–∞' %}
        <form action="/complete/{{ task.id }}" method="post">
          <button type="submit" class="btn btn-outline-success btn-sm">‚úÖ –ó–∞–≤—ä—Ä—à–µ–Ω–∞</button>
        </form>
        {% else %}
        <span class="text-success">‚úî</span>
        {% endif %}
      </td>
    </tr>
    {% else %}
    <tr><td colspan="6" class="text-center text-muted">–ù—è–º–∞ –∑–∞–¥–∞—á–∏.</td></tr>
    {% endfor %}
  </tbody>
</table>

<a href="/" class="btn btn-primary mt-3">‚¨Ö –ù–∞–∑–∞–¥</a>

{% endblock %}
